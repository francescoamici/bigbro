import{r as m}from"./index-Dj4jx_9e.js";import{w as S,e as y,K as d,M as h}from"./star-Cy966ddG.js";import{u as C}from"./use-motion-value-B3x11MzA.js";import{u as w}from"./use-transform-CUo1sKl5.js";function x(t,e,s={}){const r=t.get();let n=null,c=r,f;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,a=()=>{n&&(n.stop(),n=null)},V=()=>{a();const o=g(t.get()),i=g(c);o!==i&&(n=new d({keyframes:[o,i],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:f}))};if(t.attach((o,i)=>{c=o,f=u=>i(p(u,l)),S.postRender(()=>{V(),t.events.animationStart?.notify(),n?.then(()=>{t.events.animationComplete?.notify()})})},a),y(e)){const o=e.on("change",u=>t.set(p(u,l))),i=t.on("destroy",o);return()=>{o(),i()}}return a}function p(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function A(t,e={}){const{isStatic:s}=m.useContext(h),r=()=>y(t)?t.get():t;if(s)return w(r);const n=C(r());return m.useInsertionEffect(()=>x(n,t,e),[n,JSON.stringify(e)]),n}function D(t,e={}){return A(t,{type:"spring",...e})}export{D as u};
