import{r as m}from"./index-R1Z8Tk4t.js";import{u as S,d as y,J as d,M as h}from"./star-XL_efDnF.js";import{u as C}from"./use-motion-value-D5TSZ5wL.js";import{u as x}from"./use-transform-DnuCakcK.js";function A(t,e,s={}){const r=t.get();let n=null,c=r,f;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,a=()=>{n&&(n.stop(),n=null)},V=()=>{a();const o=g(t.get()),i=g(c);o!==i&&(n=new d({keyframes:[o,i],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...s,onUpdate:f}))};if(t.attach((o,i)=>{c=o,f=u=>i(p(u,l)),S.postRender(()=>{V(),t.events.animationStart?.notify(),n?.then(()=>{t.events.animationComplete?.notify()})})},a),y(e)){const o=e.on("change",u=>t.set(p(u,l))),i=t.on("destroy",o);return()=>{o(),i()}}return a}function p(t,e){return e?t+e:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function F(t,e={}){const{isStatic:s}=m.useContext(h),r=()=>y(t)?t.get():t;if(s)return x(r);const n=C(r());return m.useInsertionEffect(()=>A(n,t,e),[n,JSON.stringify(e)]),n}function b(t,e={}){return F(t,{type:"spring",...e})}export{b as u};
